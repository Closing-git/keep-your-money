{% extends 'base.html.twig' %}

{% block title %}Dois-je l'acheter ?
{% endblock %}

{% block styles %}
	<link rel="stylesheet" href="{{ asset('styles/quiz.css') }}">
{% endblock %}

{% block scripts %}
	<script src="{{ asset('assets/qcm.js') }}" defer></script>
{% endblock %}

{% block body %}
	<main>
		<!-- Panneau vert principal -->
		<div
			class="container quiz-container">

			<!-- Bouton universel de retour -->
			<button id="btn-back" type="button" class="btn2">Retour</button>
			<h1>Quiz : En as-tu vraiment besoin ?</h1>

			<!-- 1) Choix des catÃ©gories -->
			<!-- 1) Choix des catÃ©gories -->
			<section id="items-list" class="quiz-panel">
				<h2 id="choixTheme">Choisis un thÃ¨me</h2>

				<button type="button" data-cat="vetements">
					<img src="{{ asset('images/Vetements.png') }}" alt="VÃªtements">
					<span>VÃªtements</span>
				</button>

				<button type="button" data-cat="livres">
					<img src="{{ asset('images/Livres.png') }}" alt="Livres">
					<span>Livres</span>
				</button>

				<button type="button" data-cat="jeux">
					<img src="{{ asset('images/Jeux.png') }}" alt="Jeux-vidÃ©o">
					<span>Jeux-vidÃ©o</span>
				</button>

				<button type="button" data-cat="meubles">
					<img src="{{ asset('images/Meubles.png') }}" alt="Meubles">
					<span>Meubles</span>
				</button>

				<button type="button" data-cat="loisirs">
					<img src="{{ asset('images/Loisirs.png') }}" alt="Loisirs">
					<span>Loisirs</span>
				</button>
			</section>

			<!-- 2) Introduction de la catÃ©gorie -->
			<section id="intro-qcm" hidden class="quiz-panel">
				<h2 id="intro-titre"></h2>
				<p id="intro-texte"></p>

				<div class="quiz-buttons">
					<button id="btn-start" type="button" class="btn1">RÃ©pondre aux
																														questions</button>
					<button id="btn-change-cat" type="button" class="btn1">Changer de
																														catÃ©gorie</button>
				</div>
			</section>

			<!-- 3) Zone du QCM -->
			<section id="quiz" hidden class="quiz-panel">
				<h2 id="q-titre"></h2>

				<!-- boutons crÃ©Ã©s en JS -->
				<div id="q-choix" class="zone-reponses quiz-buttons"></div>
			</section>
			<!-- 4) RÃ©sultat / Conseil -->
			<section
				id="resultat" hidden class="quiz-panel">

				<!-- Titre dynamique -->
				<h2 id="res-titre">RÃ©sultat</h2>

				<!-- Texte dynamique -->
				<p id="res-texte">Texte dynamiqueâ€¦</p>

				<!-- Liens second main / location -->
				<div class="quiz-links">
					<a href="https://www.2ememain.be" target="_blank">2ememain.be</a>
					<a href="https://www.pret-a-louer.be" target="_blank">pret-a-louer.be</a>
					<a href="https://www.tournevie.be" target="_blank">tournevie.be</a>
				</div>

				<!-- Boutons principaux (dynamique selon positif / nÃ©gatif) -->
				<div class="quiz-buttons" id="res-actions">
					<button class="btn1" id="btn-res-no">JE NE Lâ€™ACHÃˆTE PAS</button>
					<button class="btn1" id="btn-res-yes">Je lâ€™achÃ¨te malgrÃ© vos conseils</button>
				</div>

				<!-- Popup de confirmation -->
				<div class="popup quiz" id="popup-confirm" hidden>
					<h1>Tu es sÃ»rÂ·e ?</h1>
					<ul class="quiz-reasons">
						<li>Tu vas dÃ©penser de l'argent et manquer une occasion d'en gagner dans
																												le jeu...</li>
					</ul>
					<div class="quiz-buttons">
						<button class="btn4" id="popup-no">Non, vous avez raison...</button>
						<button class="btn4" id="popup-yes">Oui, tant pis pour moi...</button>
					</div>
				</div>

			</section>

			<!-- 5) Ã‰cran BRAVO ! -->
			<section class="quiz-panel" id="quiz-bravo" hidden>
				<h2>BRAVO !</h2>

				<p>Tu as rÃ©sistÃ© et Ã©vitÃ© de dÃ©penser :
					<span id="argentEvite">xx â‚¬</span>
				</p>
				<p>En plus tu vas gagnÃ©
					<span id="jetonsGagnes">100
					</span>
					<span>ðŸª™</span>
				</p>


				<div class="quiz-buttons">
					<form method="post" action="{{ path('app_quizz') }}" id="formGain">
						<input type="hidden" name="jetonsGagnes" id="inputJetonsGagnes" value="0">
						<input type="hidden" name="action" value="gains">
						<button type="button" class="btn1" id="btnValiderGains">RÃ©cupÃ©rer mes ðŸª™</button>
						<a href="{{ path('app_mon_avatar') }}">
						<button class="btn1" id="voirAvatar">Voir mon avatar</button>
						</a>
						<a href="{{ path('app_shop') }}">
						<button class="btn1" id="allerMagasin">Aller au magasin</button>
						</a>
						<a href="{{ path('app_quizz') }}">
						<button class="btn1" id="refaireQuiz">Refaire le quiz pour un autre objet ?</button>
						</a>
					</div>
				</section>

			</main>

			<!-- SCRIPT pour rÃ©cupÃ©rer le montant d'argent gagnÃ© -->
			<script>
				document.addEventListener('DOMContentLoaded', function () {
const btnValider = document.getElementById('btnValiderGains');
if (btnValider) {
btnValider.addEventListener('click', function () {
const jetons = document.getElementById('jetonsGagnes').textContent.trim().replace('ðŸª™', '').trim();
document.getElementById('inputJetonsGagnes').value = jetons;
document.getElementById('formGain').submit();
});
}
});
			</script>
		</body>
	{% endblock %}
